begin

    recebe id da solicitaçao de treinamento

    busca status atual da solicitaçao no banco de dados via sql select

    if status for diferente de "pendente" então
        exibe mensagem de erro: "solicitaçao ja foi processada anteriormente."
        encerrar processo
    end if

    exibir opçoes para o gestor: [aprovar] ou [rejeitar]

    if gestor escolher "rejeitar" então

        solicita o motivo da rejeiçao
        if motivo da rejeiçao estiver vazio então
            exibir mensagem de erro: "motivo da rejeiçao obrigatorio."
            voltar para a etapa de entrada do motivo
        end if
        atualizar status para "rejeitado", salvar o nome do gestor e o motivo da rejeiçao no banco via sql update
        registrar log da rejeiçao (data, hora, usuario, motivo)

        tentar enviar notificação por email ao colaborador
        if falhar o envio de email então
            salvar falha em tabela de erros
            agendar reprocesso de notificaçao
        end if

        encerrar processo
    end if

    if gestor escolher "aprovar" então
        buscar dados do colaborador da solicitaçao via sql select
        if colaborador não encontrado então
            exibir mensagem de erro: "colaborador nao encontrado."
            encerrar processo
        end if

        if colaborador.status != "ativo" então
            exibir mensagem de erro: "colaborador nao ativo."
            encerrar processo
        end if

        atualizar status para "aprovado", salvar o nome do gestor no banco via sql update
        
        registrar log da aprovação (data, hora, usuario)

        tentar enviar notificaçao por email ao colaborador
        if falhar o envio de email então
            salvar falha em tabela de erros
            agendar reprocesso de notificaçao
        end if

        encerrar processo
    end if
end
